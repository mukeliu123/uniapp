{"version":3,"sources":["uni-app:///utils/verify.js","uni-app:///utils/common.js"],"names":["myEnv","store","state","env","TEST_ENV","ENV","Token","baseUrl","token","uni","getStorageSync","removeStorageSync","getTokenFromServe","verifyTokenFromServer","console","log","login","provider","success","r","that","verifyTokenStorage"],"mappings":";;;;;;;;;;kIAAA;AACA,uF;AACA,IAAIA,KAAK,GAAGC,gBAAMC,KAAN,CAAYC,GAAZ,KAAoB,MAApB,GAA6BA,eAAIC,QAAjC,GAA4CD,eAAIE,GAA5D;AACA;IACMC,K;AACL,mBAAc;AACV,SAAKC,OAAL,GAAeP,KAAf;AACH;AACD;yFACoB;AACnB,UAAIQ,KAAK,GAAGC,GAAG,CAACC,cAAJ,CAAmB,OAAnB,CAAZ;AACA,UAAG,CAACF,KAAJ,EAAU;AACTC,WAAG,CAACE,iBAAJ,CAAsB,OAAtB;AACA,aAAKC,iBAAL;AACA,OAHD,MAGM;AACL,aAAKC,qBAAL,CAA2BL,KAA3B;AACA;AACD;AACD;qEACmB;AAClBM,aAAO,CAACC,GAAR,CAAY,WAAZ;AACAN,SAAG,CAACO,KAAJ,CAAU;AACTC,gBAAQ,EAAE,QADD;AAETC,eAAO,EAAC,iBAASC,CAAT,EAAW;AAClBL,iBAAO,CAACC,GAAR,CAAYI,CAAZ;AACA,SAJQ,EAAV;;AAMA,K;;AAEqBX,S,EAAM;AAC3BM,aAAO,CAACC,GAAR,CAAY,cAAZ;AACA,UAAIK,IAAI,GAAG,IAAX;AACA,K;;;AAGad,K;;;;;;;;;;;;;0JCnCf;AACO,SAASe,kBAAT,GAA6B;AACnC,MAAIb,KAAK,GAAGC,GAAG,CAACC,cAAJ,CAAmB,OAAnB,CAAZ;AACA,MAAG,CAACF,KAAJ,EAAU;AACTC,OAAG,CAACE,iBAAJ,CAAsB,OAAtB;AACA,WAAO,KAAP;AACA,GAHD,MAGM;AACL,WAAO,IAAP;AACA;AACD,C","file":"pages_a/common/vendor.js","sourcesContent":["import env from '../env/index.js'\r\nimport store from '../store/index.js';\r\nlet myEnv = store.state.env === 'test' ? env.TEST_ENV : env.ENV;\r\n//Token 验证\r\nclass Token {\r\n\tconstructor() {\r\n\t    this.baseUrl = myEnv;\r\n\t}\r\n\t//校验token是否存在本地\r\n\tverifyTokenStorage(){\r\n\t\tlet token = uni.getStorageSync('token');\r\n\t\tif(!token){\r\n\t\t\tuni.removeStorageSync('token');   \r\n\t\t\tthis.getTokenFromServe();\r\n\t\t} else{\r\n\t\t\tthis.verifyTokenFromServer(token);\r\n\t\t}\r\n\t}\r\n\t//服务端获取新token\r\n\tgetTokenFromServe(){\r\n\t\tconsole.log('get token');\r\n\t\tuni.login({\r\n\t\t\tprovider: 'weixin',\r\n\t\t\tsuccess:function(r){\r\n\t\t\t\tconsole.log(r);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t携带令牌去服务器校验令牌\r\n\tverifyTokenFromServer(token){\r\n\t\tconsole.log('verify token');\r\n\t\tlet that = this;\r\n\t}\r\n}\r\n\r\nexport default Token;\r\n","//验证token是否存在本地\r\nexport function verifyTokenStorage(){\r\n\tlet token = uni.getStorageSync('token');\r\n\tif(!token){\r\n\t\tuni.removeStorageSync('token');   \r\n\t\treturn false;\r\n\t} else{\r\n\t\treturn true;\r\n\t}\r\n}"],"sourceRoot":""}